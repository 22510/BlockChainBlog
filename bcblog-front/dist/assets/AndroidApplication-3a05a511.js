import{_ as z}from"./BClogo-c299679b.js";import{g as j,h as m,i as G,j as h,r,o as M,c as H,a as p,b as e,w as t,e as i,t as J,u as K,k as O,E as n,p as P,f as W,l as X,_ as Y}from"./index-8b895a85.js";const q=v=>(P("data-v-d025b38c"),v=v(),W(),v),Z={class:"shell"},ee={class:"page0"},le={class:"BCLogo"},ae=q(()=>p("img",{style:{width:"18vw"},src:z},null,-1)),te={style:{"font-size":"9vw","text-shadow":"0 0 0.5em #38a1ff"},class:"BCName"},se={class:"submitForm"},oe=q(()=>p("div",{class:"el-upload__text"},[i(" Drop file here or "),p("em",null,"click to upload")],-1)),ue=q(()=>p("div",{class:"el-upload__tip"}," 只能上传pdf文件. 非必须, 但如果有, 我们很愿意接收您的简历:) ",-1)),re=j({__name:"AndroidApplication",setup(v){const F=X,g=m(),a=m({name:"",grade:"",email:"",qq:"",type:0,desc:"",captcha:""}),U=G({name:[{required:!0,message:"请输入名字",trigger:"blur"},{min:2,max:10,message:"名字异常",trigger:"blur"}],grade:[{required:!0,message:"请选择你的年级",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:(o,l,d)=>{if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(l))return d();d(new Error("请输入合法的邮箱"))},trigger:"blur"}],qq:[{required:!0,message:"请输入QQ",trigger:"blur"}],type:[{type:"number",required:!0,message:"选择你感兴趣的方向",trigger:"blur"}],desc:[{required:!0,message:"请进行自我介绍",trigger:"blur"}]});let _;const I=async o=>{if(!o)return console.error("错误");await o.validate((l,d)=>{if(l){switch(n({message:"正在提交申请 :)",type:"success"}),a.value.type){case 1:_="develop";break;case 2:_="apply";break;case 3:_="publicity";break;case 4:_="activity";break}h.post("application/submit",{userName:a.value.name,userGrade:a.value.grade,userEmail:a.value.email,userQq:a.value.qq,userInterest:_,userDescription:a.value.desc,captcha:a.value.captcha}).then(function(u){u.data.success==!0?(n({message:"申请提交成功, 请查看您的邮箱以确定是否提交, 正在跳转到首页. 如果5秒网页未跳转, 请手动刷新一下 :)",type:"success"}),setTimeout(()=>{F.push("/")},5e3)):(n({message:"申请提交失败, 请稍后重试 :(",type:"error"}),o.resetFields())}).catch(function(u){console.log(u)})}else console.log("error submit!",d)})},f=m(!1),b=m(60);let k=null;const A=()=>{f.value||(f.value=!0,k=setInterval(()=>{b.value-=1,b.value<=0&&(clearInterval(k),f.value=!1,b.value=10)},1e3))},Q=async o=>{if(!o)return console.error("错误");await o.validate((l,d)=>{l?(n({message:"正在获取验证码 :)",type:"success"}),h.get("application/captcha",{params:{email:a.value.email}}).then(function(u){u.data.success==!0?(n({message:"获取验证码成功, 请邮箱查看, 有效时间2分钟 :)",type:"success"}),A()):(n({message:"获取验证码失败, 请稍后重新尝试 :(",type:"error"}),o.resetFields())}).catch(function(u){console.log(u)})):console.log("error submit!",d)})},B=o=>{o&&o.resetFields()},S=h.defaults.baseURL+"application/submit/upload",x=m({email:"",name:""}),$=o=>{if(a.value.name.length===0)return n({message:"请先填写表单内容",type:"error"}),!1;x.value.name=a.value.name,n({message:'正在上传简历, 如果未提示"上传成功", 请重试 :)',type:"success"})},D=o=>{o.success==!0?n({message:"文件上传成功, 请点击申请加入!",type:"success"}):n({message:"文件上传失败, 请再次尝试",type:"error"}),C.value=[]},C=m([]);return(o,l)=>{const d=r("router-link"),u=r("el-input"),c=r("el-form-item"),y=r("el-option"),N=r("el-select"),w=r("el-radio"),R=r("el-radio-group"),V=r("el-button"),E=r("el-icon"),L=r("el-upload"),T=r("el-form");return M(),H("div",Z,[p("div",ee,[p("div",le,[ae,p("div",te,[e(d,{to:"/",class:"toIndex"},{default:t(()=>[i("西电区块链协会")]),_:1})])]),p("div",se,[e(T,{ref_key:"ruleFormRef",ref:g,model:a.value,rules:U,"label-width":"25vw",class:"applicationForm","status-icon":"","label-position":"left"},{default:t(()=>[e(c,{class:"label",label:"姓名",prop:"name"},{default:t(()=>[e(u,{modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value.name=s),placeholder:"请输入名字"},null,8,["modelValue"])]),_:1}),e(c,{label:"年级:",prop:"grade"},{default:t(()=>[e(N,{modelValue:a.value.grade,"onUpdate:modelValue":l[1]||(l[1]=s=>a.value.grade=s),placeholder:"请选择你的年级"},{default:t(()=>[e(y,{label:"21",value:"21"}),e(y,{label:"22",value:"22"}),e(y,{label:"23",value:"23"}),e(y,{label:"24",value:"24"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"邮箱:",prop:"email"},{default:t(()=>[e(u,{modelValue:a.value.email,"onUpdate:modelValue":l[2]||(l[2]=s=>a.value.email=s),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),e(c,{label:"QQ:",prop:"qq"},{default:t(()=>[e(u,{modelValue:a.value.qq,"onUpdate:modelValue":l[3]||(l[3]=s=>a.value.qq=s),placeholder:"请输入QQ"},null,8,["modelValue"])]),_:1}),e(c,{label:"兴趣方向",prop:"type"},{default:t(()=>[e(R,{modelValue:a.value.type,"onUpdate:modelValue":l[4]||(l[4]=s=>a.value.type=s)},{default:t(()=>[e(w,{label:1},{default:t(()=>[i("技术部-开发组")]),_:1}),e(w,{label:2},{default:t(()=>[i("技术部-应用组")]),_:1}),e(w,{label:3},{default:t(()=>[i("宣传部")]),_:1}),e(w,{label:4},{default:t(()=>[i("活动部")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"个人简介",prop:"desc"},{default:t(()=>[e(u,{modelValue:a.value.desc,"onUpdate:modelValue":l[5]||(l[5]=s=>a.value.desc=s),type:"textarea",autosize:{minRows:3,maxRows:8},placeholder:"请输入个人简介"},null,8,["modelValue"])]),_:1}),e(c,{label:"验证码:",prop:"captcha"},{default:t(()=>[e(u,{modelValue:a.value.captcha,"onUpdate:modelValue":l[7]||(l[7]=s=>a.value.captcha=s)},{suffix:t(()=>[e(V,{type:"primary",onClick:l[6]||(l[6]=s=>Q(g.value)),disabled:f.value},{default:t(()=>[i(J(f.value?` ${b.value} 秒后可用`:"获取验证码"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),e(L,{class:"upload-demo",drag:"",accept:".pdf",action:S,data:x.value,"before-upload":$,"on-success":D,ref:"upload","file-list":C.value,limit:1,multiple:""},{tip:t(()=>[ue]),default:t(()=>[e(E,{class:"el-icon--upload"},{default:t(()=>[e(K(O))]),_:1}),oe]),_:1},8,["data","file-list"]),e(c,{class:"submitButton"},{default:t(()=>[e(V,{type:"primary",onClick:l[8]||(l[8]=s=>I(g.value))},{default:t(()=>[i(" 申请加入 ")]),_:1}),e(V,{type:"primary",onClick:l[9]||(l[9]=s=>B(g.value))},{default:t(()=>[i(" 重置内容 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])])}}});const ce=Y(re,[["__scopeId","data-v-d025b38c"]]);export{ce as default};
