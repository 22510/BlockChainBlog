import{_ as N}from"./BClogo-c299679b.js";import{g as T,h as v,i as h,r as n,o as M,c as D,a as V,b as e,w as l,e as i,t as j,j as x,E as w,l as z,p as K,f as L,m as O,_ as P}from"./index-8b895a85.js";const A=m=>(K("data-v-43d3efa2"),m=m(),L(),m),G={class:"shell"},H={class:"BCLogo",style:{"padding-top":"5%"}},J=A(()=>V("img",{style:{width:"150px"},src:N},null,-1)),Q={style:{"font-size":"60px","text-shadow":"0 0 0.5em #38a1ff, 0 0 0.2em #5c5c5c"},class:"BCName"},W=T({__name:"UserRegister",setup(m){v("default");const _=v(),a=h({name:"",grade:"",email:"",interest:0,password:"",captcha:""}),C=h({name:[{required:!0,message:"请输入名字",trigger:"blur"}],grade:[{required:!0,message:"请选择你的年级",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:(o,t,u)=>{if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t))return u();u(new Error("请输入合法的邮箱"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],interest:[{type:"number",required:!0,message:"选择你感兴趣的方向",trigger:"blur"}]}),B=()=>{O.alert("注册申请提交成功, 若为协会/工作室成员, 请向管理员邮箱发送邮件说明.","提示",{confirmButtonText:"OK",callback:o=>{w({type:"success",message:`action: ${o}`})}})};let c;const F=async o=>{if(!o)return console.error("错误");await o.validate((t,u)=>{if(t){switch(a.interest){case 1:c="BlockChain";break;case 2:c="FrontEnd";break;case 3:c="BackEnd";break;case 4:c="Publicity/beautify";break}x.post("bc208/register",{username:a.name,grade:a.grade,email:a.email,interest:c,password:a.password,captcha:a.captcha}).then(function(s){s.data.success==!0?(B(),setTimeout(()=>{E.push("/userpage")},2e3)):(w({message:"注册失败, "+s.data.errorMsg,type:"error"}),o.resetFields())}).catch(function(s){console.log(s)})}else console.log("error submit!",u)})},p=v(!1),f=v(60);let k=null;const U=()=>{p.value||(p.value=!0,k=setInterval(()=>{f.value-=1,f.value<=0&&(clearInterval(k),p.value=!1,f.value=10)},1e3))},I=async o=>{if(!o)return console.error("错误");await o.validate((t,u)=>{t?x.get("bc208/captcha",{params:{email:a.email}}).then(function(s){s.data.success==!0?(w({message:"获取验证码成功, 请邮箱查看, 有效时间2分钟.",type:"success"}),U()):(w({message:"获取验证码失败, 请重新尝试.",type:"error"}),o.resetFields())}).catch(function(s){console.log(s)}):console.log("error submit!",u)})},$=o=>{o&&o.resetFields()},E=z;return(o,t)=>{const u=n("router-link"),s=n("el-input"),d=n("el-form-item"),g=n("el-option"),R=n("el-select"),b=n("el-radio"),S=n("el-radio-group"),y=n("el-button"),q=n("el-form");return M(),D("div",G,[V("div",H,[J,V("div",Q,[e(u,{to:"/",class:"toIndex"},{default:l(()=>[i("BlockChain Studio 208")]),_:1})])]),e(q,{ref_key:"ruleFormRef",ref:_,model:a,rules:C,"label-width":"150px",class:"applicationForm","status-icon":"","label-position":"left"},{default:l(()=>[e(d,{label:"姓名:",prop:"name"},{default:l(()=>[e(s,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=r=>a.name=r)},null,8,["modelValue"])]),_:1}),e(d,{label:"年级:",prop:"grade"},{default:l(()=>[e(R,{modelValue:a.grade,"onUpdate:modelValue":t[1]||(t[1]=r=>a.grade=r),style:{width:"auto"},placeholder:"请选择你的年级"},{default:l(()=>[e(g,{label:"21",value:"21"}),e(g,{label:"22",value:"22"}),e(g,{label:"23",value:"23"}),e(g,{label:"24",value:"24"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"邮箱:",prop:"email"},{default:l(()=>[e(s,{modelValue:a.email,"onUpdate:modelValue":t[2]||(t[2]=r=>a.email=r)},null,8,["modelValue"])]),_:1}),e(d,{label:"兴趣",prop:"type"},{default:l(()=>[e(S,{modelValue:a.interest,"onUpdate:modelValue":t[3]||(t[3]=r=>a.interest=r)},{default:l(()=>[e(b,{label:1},{default:l(()=>[i("区块链")]),_:1}),e(b,{label:2},{default:l(()=>[i("前端")]),_:1}),e(b,{label:3},{default:l(()=>[i("后端")]),_:1}),e(b,{label:4},{default:l(()=>[i("宣发/美术")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"密码:",prop:"password"},{default:l(()=>[e(s,{modelValue:a.password,"onUpdate:modelValue":t[4]||(t[4]=r=>a.password=r)},null,8,["modelValue"])]),_:1}),e(d,{label:"验证码:",prop:"captcha"},{default:l(()=>[e(s,{modelValue:a.captcha,"onUpdate:modelValue":t[6]||(t[6]=r=>a.captcha=r)},{suffix:l(()=>[e(y,{type:"primary",onClick:t[5]||(t[5]=r=>I(_.value)),disabled:p.value},{default:l(()=>[i(j(p.value?` ${f.value} 秒后可用`:"获取验证码"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),e(d,{class:"submitButton"},{default:l(()=>[e(y,{type:"primary",onClick:t[7]||(t[7]=r=>F(_.value))},{default:l(()=>[i(" 注册 ")]),_:1}),e(y,{type:"primary",onClick:t[8]||(t[8]=r=>$(_.value))},{default:l(()=>[i("重置内容")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const ee=P(W,[["__scopeId","data-v-43d3efa2"]]);export{ee as default};
